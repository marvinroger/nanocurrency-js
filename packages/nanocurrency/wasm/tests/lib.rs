//! Test suite for the Web and headless browsers.

#![cfg(target_arch = "wasm32")]

extern crate wasm_bindgen_test;
use wasm_bindgen_test::*;

extern crate nanocurrency_wasm;
use nanocurrency_wasm::work;

#[wasm_bindgen_test]
fn compute_work() {
    let block_hash = [
        0xb9, 0xcb, 0x6b, 0x51, 0xb8, 0xeb, 0x86, 0x9a, 0xf0, 0x85, 0xc4, 0xc0, 0x3e, 0x7d, 0xc5,
        0x39, 0x94, 0x3d, 0x0b, 0xdd, 0xe1, 0x3b, 0x21, 0x43, 0x6b, 0x68, 0x7c, 0x9c, 0x7e, 0xa5,
        0x6c, 0xb0,
    ];
    let work_threshold = [0xff, 0xff, 0xff, 0xc0, 0x00, 0x00, 0x00, 0x00];
    let result = work(&block_hash, 0, 1, &work_threshold).unwrap();

    assert_eq!(
        result.to_vec(),
        vec![0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x06, 0x00]
    );
}
